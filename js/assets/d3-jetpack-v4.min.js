(function(f,d){"object"===typeof exports&&"undefined"!==typeof module?d(exports,require("d3-selection"),require("d3-transition"),require("d3-axis"),require("d3-scale"),require("d3-collection"),require("d3-queue"),require("d3-request")):"function"===typeof define&&define.amd?define("exports d3-selection d3-transition d3-axis d3-scale d3-collection d3-queue d3-request".split(" "),d):d(f.d3=f.d3||{},f.d3,f.d3,f.d3,f.d3,f.d3,f.d3,f.d3)})(this,function(f,d,r,m,n,p,q,k){function l(a){if("string"===typeof a){var b=
{},c=a.split(/([\.#])/g),e;for(a=c.shift();e=c.shift();)"."==e?b["class"]=b["class"]?b["class"]+" "+c.shift():c.shift():"#"==e&&(b.id=c.shift());return{tag:a,attr:b}}return a}function h(){for(var a=arguments,b=0,c=a.length;b<c;){if("string"===typeof a[b]||"number"===typeof a[b])a[b]=function(a){return function(b){return b[a]}}(a[b]);b++}return function(b){for(var c=0,e=a.length;c++<e;)b=a[c-1].call(this,b);return b}}h.not=function(a){return!a};h.run=function(a){return a()};h.objToFn=function(a,b){1==
    arguments.length&&(b=void 0);return function(b){return a[b]}};d.selection.prototype.translate=function(a){return this.attr("transform",function(b,c){return"translate("+["function"==typeof a?a.call(this,b,c):a]+")"})};d.selection.prototype.append=function(a){var b=l(a),c;a=d.creator(b.tag);c=this.select(function(){return this.appendChild(a.apply(this,arguments))});for(var e in b.attr)c.attr(e,b.attr[e]);return c};d.selection.prototype.selectAppend=function(a){var b=d.selector(a),c=l(a),e;a=d.creator(c.tag);
    e=this.select(function(){return b.apply(this,arguments)||this.appendChild(a.apply(this,arguments))});for(var g in c.attr)e.attr(g,c.attr[g]);return e};d.selection.prototype.tspans=function(a,b){this.selectAll("tspan").data(a).enter().append("tspan").text(function(a){return a}).attr("x",-45).attr("dy",b||15);this.selectAll("tspan").data(a).text(function(a){return a}).attr("dy",b||15);return this};d.selection.prototype.appendMany=function(a,b){return this.selectAll(null).data(a).enter().append(b)};
    d.selection.prototype.at=function(a,b){if("object"==typeof a){for(var c in a)this.attr(c.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase(),a[c]);return this}return 1==arguments.length?this.attr(a):this.attr(a,b)};d.selection.prototype.st=function(a,b){function c(a,b,c){b=b.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase();~"top left bottom right padding-top padding-left padding-bottom padding-right border-top b-width border-left-width border-botto-width m border-right-width  margin-top margin-left margin-bottom margin-right font-size width height stroke-width line-height margin padding border max-width min-width".indexOf(b)?
        a.style(b,"function"==typeof c?h(c,e):e(c)):a.style(b,c);return a}function e(a){return a.match?a:a+"px"}if("object"==typeof a){for(var g in a)c(this,g,a[g]);return this}return 1==arguments.length?this.style(a):c(this,a,b)};d.selection.prototype.prop=d.selection.prototype.property;f.wordwrap=function(a,b){var c=a.split(" "),e=[],g=[],f=b||40,d=0;c.forEach(function(a){d+a.length>f&&(e.push(g.join(" ")),d=g.length=0);d+=a.length;g.push(a)});g.length&&e.push(g.join(" "));return e.filter(function(a){return""!=
        a})};f.parseAttributes=l;f.f=h;f.ascendingKey=function(a){return"function"==typeof a?function(b,c){return a(b)<a(c)?-1:a(b)>a(c)?1:a(b)>=a(c)?0:NaN}:function(b,c){return b[a]<c[a]?-1:b[a]>c[a]?1:b[a]>=c[a]?0:NaN}};f.descendingKey=function(a){return"function"==typeof a?function(b,c){return a(c)<a(b)?-1:a(c)>a(b)?1:a(c)>=a(b)?0:NaN}:function(b,c){return c[a]<b[a]?-1:c[a]>b[a]?1:c[a]>=b[a]?0:NaN}};f.conventions=function(a){a=a||{};a.margin=a.margin||{top:20,right:20,bottom:20,left:20};a.width=a.width||
        a.totalWidth-a.margin.left-a.margin.right||900;a.height=a.height||a.totalHeight-a.margin.top-a.margin.bottom||460;a.totalWidth=a.width+a.margin.left+a.margin.right;a.totalHeight=a.height+a.margin.top+a.margin.bottom;a.parentSel=a.parentSel||d.select("body");a.rootsvg=a.parentSel.append("svg");a.svg=a.rootsvg.attr("width",a.totalWidth).attr("height",a.totalHeight).append("g").attr("transform","translate("+a.margin.left+","+a.margin.top+")");a.x=a.x||n.scaleLinear().range([0,a.width]);a.y=a.y||n.scaleLinear().range([a.height,
        0]);a.xAxis=a.xAxis||m.axisBottom().scale(a.x);a.yAxis=a.yAxis||m.axisLeft().scale(a.y);a.drawAxis=function(){a.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+a.height+")").call(a.xAxis);a.svg.append("g").attr("class","y axis").call(a.yAxis)};return a};f.attachTooltip=function(a,b,c){if(a.size()){b=b||d.select(".tooltip");a.on("mouseover.attachTooltip",function(a){b.classed("tooltip-hidden",!1).html("").appendMany(c,"div").html(function(b){return b(a)});d.select(this).classed("tooltipped",
        !0)}).on("mousemove.attachTooltip",function(a){a=b;if(a.size()){var c=d.event,e=c.clientX,c=c.clientY,g=a.node().getBoundingClientRect();a.style("top",c+(window.scrollY?window.scrollY:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)-g.height-18+"px");a.style("left",Math.min(Math.max(20,e-g.width/2),window.innerWidth-g.width-20)+"px")}}).on("mouseout.attachTooltip",function(a){b.classed("tooltip-hidden",!0);d.selectAll(".tooltipped").classed("tooltipped",!1)}).on("click.attachTooltip",function(a){console.log(a)});var e=a.datum();c=c||p.keys(e).filter(function(a){return"object"!=typeof e[a]&&"array"!=e[a]}).map(function(a){return function(b){return a+": <b>"+b[a]+"</b>"}})}};f.loadData=function(a,b){var c=q.queue();a.forEach(function(a){var d=a.split(".").reverse()[0],d={csv:k.csv,tsv:k.tsv,json:k.json}[d];if(!d)return b(Error("Invalid type",a));c.defer(d,a)});c.awaitAll(b)};f.nestBy=function(a,b){return p.nest().key(b).entries(a).map(function(a){a.values.key=a.key;return a.values})};f.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};Object.defineProperty(f,"__esModule",{value:!0})});